/*
 * jqGeoMap v3.8.7.0 (http://www.jqchart.com)
 * Copyright 2013 jqChart Inc. All rights reserved.
 *
 * jqGeoMap commercial licenses may be obtained at
 * http://www.jqchart.com/pricing.aspx
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
(function(b){b.fn.jqGeoMap=function(a,d,e){if(typeof a==="object")d=a;else if(typeof a==="string"){a=a.toLowerCase();if(b.fn.jqGeoMap.methods[a])return b.fn.jqGeoMap.methods[a].call(this,d,e);else b.error("Method "+method+" does not exist on jQuery.jqMap")}var c=this.data("data");if(!c){c=new g(this);this.data("data",c)}c._setOptions(d);return this};b.fn.jqGeoMap.methods={map:function(){return this.data("data")},destroy:function(){var a=this.data("data");if(a){a.destroy();this.removeData("data")}},options:function(){var a=this.data("data");return!a?void 0:a.options},option:function(b,c){var a=this.data("data");if(!a)return;if(!c)return a.options[b];a.options[b]=c;a._setOptions(a.options)},update:function(c){var a=this.data("data");if(!a)return this;var d=b.extend(false,{},a.options,c||{});a._setOptions(d)},todataurl:function(b){var a=this.data("data");return!a?null:a.toDataURL(b)},highlightdata:function(b){var a=this.data("data");a&&a.highlightData(b)},ismouseover:function(){var a=this.data("data");return a?a.isMouseOver:false},exporttoimage:function(b){var a=this.data("data");a&&a.exportToImage(b)},exporttopdf:function(b){var a=this.data("data");a&&a.exportToPdf(b)}};b.fn.jqGeoMap.defaults={background:"#EAF7FE",border:{cornerRadius:10,padding:2},shadows:{enabled:true,shadowColor:"#cccccc",shadowBlur:6,shadowOffsetX:2,shadowOffsetY:2},tooltips:{disabled:false,type:"normal",borderColor:"auto",snapArea:25,highlighting:true,highlightingFillStyle:"rgba(204, 204, 204, 0.5)",highlightingStrokeStyle:"rgba(204, 204, 204, 0.5)"},globalAlpha:1,zoomLevel:1,minZoomLevel:1,offsetX:0,offsetY:0,exportConfig:{server:"http://www.jqchart.com/export/default.aspx",method:"post"}};b.fn.jqMouseCapture=function(a){var c=b(document);this.each(function(){var d=b(this),e={};d.mousedown(function(h){var f;if(a.move){f=function(b){a.move.call(d,b,e)};c.mousemove(f)}var b,g=function(){a.move&&c.unbind("mousemove",f);c.unbind("mouseup",b)};if(a.up)b=function(b){g();return a.up.call(d,b,e)};else b=g;c.mouseup(b);h.preventDefault();return a.down.call(d,h,e)})});return this};var E=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},25)}}();function L(e){var c=e,a=false,b=false;function d(){if(a){c();E(d);b=true;a=false}else b=false}this.kick=function(){a=true;!b&&d()};this.end=function(d){var e=c;if(!d)return;if(!b)d();else{c=a?function(){e();d()}:d;a=true}}}function y(a){this.view=a}y.prototype={canStart:function(){return false},start:function(){},keyDown:function(){},keyUp:function(){},mouseMove:function(){},mouseDown:function(){},mouseUp:function(){},touchStart:function(){},touchMove:function(){},touchEnd:function(){},mouseWheel:function(){},stop:function(){},stopTool:function(){this.view.currentTool==this&&this.view.setCurrentTool(null)}};function G(a){this.callback=a;this.animations=[]}G.prototype={begin:function(){if(d.use_excanvas)return;var a=this.animations;if(!a||a.length==0)return;this.stopped=false;for(var e=new Date,b=0;b<a.length;b++){var c=a[b];c.begin(e)}this.animate()},animate:function(){if(this.stopped)return;for(var d=this.animations,g=new Date,a=false,c=0;c<d.length;c++){var e=d[c],f=e.animate(g);a=a||f}if(!a)return;this.callback();E(b.proxy(this.animate,this))},stop:function(){this.stopped=true},clear:function(){this.animations=[]},addAnimation:function(a){this.animations.push(a)}};function j(a){y.call(this,a)}j.prototype=new y;j.constructor=j;j.prototype.mouseDown=function(d){for(var b=this.view.mouseDownTools,a=0;a<b.length;a++){var c=b[a];if(c.canStart(d)){this.view.setCurrentTool(c);return}}};j.prototype.mouseMove=function(d){for(var b=this.view.mouseMoveTools,a=0;a<b.length;a++){var c=b[a];if(c.canStart(d)){this.view.setCurrentTool(c);return}}this.view._processMouseMove(d)};j.prototype.touchStart=function(d){for(var b=this.view.touchStartTools,a=0;a<b.length;a++){var c=b[a];if(c.canStart(d)){this.view.setCurrentTool(c);return}}this.view._processTouchStart(d)};j.prototype.touchMove=function(d){for(var b=this.view.touchMoveTools,a=0;a<b.length;a++){var c=b[a];if(c.canStart(d)){this.view.setCurrentTool(c);return}}this.view._processTouchMove(d)};function d(a){if(!a)return;this.shapes=[];this.mouseDownTools=[];this.mouseMoveTools=[];this.touchStartTools=[];this.touchMoveTools=[];this.defaultTool=new j(this);this.currentTool=this.defaultTool;this._createElements(a)}d.setShadows=function(d,b,e){if(!e)return;var c=e.options.shadows;d.shadowColor=!a.isNull(b.shadowColor)?b.shadowColor:c.shadowColor;d.shadowBlur=!a.isNull(b.shadowBlur)?b.shadowBlur:c.shadowBlur;d.shadowOffsetX=!a.isNull(b.shadowOffsetX)?b.shadowOffsetX:c.shadowOffsetX;d.shadowOffsetY=!a.isNull(b.shadowOffsetY)?b.shadowOffsetY:c.shadowOffsetY};d.support_canvas=function(){return!!document.createElement("canvas").getContext};d.use_excanvas=!d.support_canvas()?true:false;d.isTouchDevice=!!("ontouchstart"in window);d.isGestureDevice=!!("ongesturestart"in window);d.isPointerDevice=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;d.checkIfRetinaDisplay=function(){var a="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)";return window.devicePixelRatio>=2?true:window.matchMedia&&window.matchMedia(a).matches?true:false};d.isRetinaDisplay=d.checkIfRetinaDisplay();d.prototype={_createElements:function(c){this.elem=c;var a=this;if(!d.isTouchDevice){c.mouseenter(function(b){a._mouseEnter(b)});c.mouseleave(function(b){a._mouseLeave(b)});c.jqMouseCapture({down:b.proxy(a._mouseDown,this),move:b.proxy(a._mouseMove,this),up:b.proxy(a._mouseUp,this)});c.mousemove(function(b){!a.isMouseDown&&a._mouseMove(b)})}c.keydown(function(b){a._keyDown(b)});c.keyup(function(b){a._keyUp(b)});c.resize(function(){a._resize()});b(window).bind("resize.jqChart",function(){a._resize()});b(window.document).bind("keydown.jqChart",function(b){a._keyDown(b)});c.bind("mousewheel",function(e,d,b,c){a._mouseWheel(e,d,b,c)});if(d.isTouchDevice){c.bind("touchstart",function(b){a._touchStart(b)});c.bind("touchmove",function(b){a._touchMove(b)});c.bind("touchend",function(b){a._touchEnd(b)})}else if(d.isPointerDevice){b.each(["pointerdown","MSPointerDown"],function(){c.bind(this,function(b){a._touchStart(b)})});b.each(["pointermove","MSPointerMove"],function(){c.bind(this,function(b){a._touchMove(b)})});b.each(["pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(){c.bind(this,function(b){a._touchEnd(b)})})}this.canvas=this._createCanvas();this.tooltip=this._createTooltip();this.shapeRenderer=new n(this.canvas,this);this.ctx=this.shapeRenderer.ctx},_setOptions:function(){this.locOffset=null;var a=this.elem;this.originalCursor="auto";!a.hasClass(this.pluginClass)&&a.addClass(this.pluginClass);a.css("position")=="static"&&a.css("position","relative");!this.tooltip.hasClass(this.tooltipClass)&&this.tooltip.addClass(this.tooltipClass)},_createHighlightRenderer:function(){if(d.use_excanvas){this.hlCanvas=this._createCanvas(true);var a=b('<div style="position:absolute"></div>');this.elem.append(a);a.append(this.hlCanvas);this.hlRenderer=new n(this.hlCanvas,this);this.hlRenderer.div=a}else{this.hlCanvas=this._createCanvas();this.hlRenderer=new n(this.hlCanvas,this)}this.hlRenderer.isHighlighting=true},_createCanvas:function(c){var a=document.createElement("canvas");a.width=10;a.height=10;b(a).css({position:"absolute",left:0,top:0});if(d.use_excanvas){window.G_vmlCanvasManager.init_(document);window.G_vmlCanvasManager.initElement(a)}!c&&this.elem.append(a);return a},_setCanvasSize:function(a,c,b){a.width=c;a.height=b},_setRetinaDispOpts:function(a,d,c){a.setAttribute("width",2*d);a.setAttribute("height",2*c);var b=a.getContext("2d");b.scale(2,2)},_createTooltip:function(){var a=b('<div style="position:absolute;display:none"></div>');this.elem.append(a);return a},_addTrialWatermark:function(c){var b=window.location.host.indexOf("www.jquerychart.com");if(b!=-1)return;b=window.location.host.indexOf("www.jqchart.com");if(b!=-1)return;var a=new e("www.jqchart.com");a.chart=this;a.font="14px sans-serif";a.fillStyle="gray";a.measure(this.ctx);a.x=this._width-a.width-16;a.y=this._height-a.height;c.push(a)},_measure:function(){},_arrange:function(){},_keyDown:function(a){this.currentTool.keyDown(a)},_keyUp:function(a){this.currentTool.keyUp(a)},_mouseEnter:function(){this.isMouseOver=true},_mouseLeave:function(){this._clearRenderers();this.locOffset=null;this.isMouseOver=false},_mouseDown:function(a){this.isMouseDown=true;this._oldShape!=null&&this._triggerShapeEvent("MouseDown",this._oldShape);this.currentTool.mouseDown(a)},_mouseMove:function(a){this._initMouseInput(a);this._processMouseEvents();this.currentTool.mouseMove(a)},_mouseUp:function(a){this._oldShape!=null&&this._triggerShapeEvent("MouseUp",this._oldShape);this.isMouseDown=false;this.currentTool.mouseUp(a)},_mouseWheel:function(d,c,a,b){this.currentTool.mouseWheel(d,c,a,b)},_touchStart:function(a){this._initTouchInput(a);this.isTouchOver=true;this._processTouchEvents();this.currentTool.touchStart(a)},_touchMove:function(b){this._initTouchInput(b);var a=this.touchInput[0];this.isTouchOver=this.contains(a.locX,a.locY);this._processTouchEvents();this.currentTool.touchMove(b)},_touchEnd:function(a){this._initTouchInput(a);if(this._oldShape!=null){this._triggerShapeEvent("TouchEnd",this._oldShape);this._oldShape=null}this.currentTool.touchEnd(a)},_initMouseInput:function(b){this.isMouseOver=true;var c=b.pageX,d=b.pageY;if(!this.locOffset)this.locOffset=this._getLocOffset();var a=this.locOffset,f=c-a.left,g=d-a.top,e={x:c,y:d,locX:f,locY:g};this.mouseInput=e},_initTouchInput:function(j){var b=j.originalEvent.touches;if(!this.locOffset)this.locOffset=this._getLocOffset();for(var c=this.locOffset,d=[],a=0;a<b.length;a++){var e=b[a],f=e.pageX,g=e.pageY,h=f-c.left,i=g-c.top;d.push({x:f,y:g,locX:h,locY:i})}this.touchInput=d},_getLocOffset:function(){var a=this.elem.offset(),c=parseFloat(b(document.body).css("borderLeftWidth"));if(!isNaN(c))a.left+=c;var d=parseFloat(b(document.body).css("borderTopWidth"));if(!isNaN(d))a.top+=d;return a},getAllTouches:function(h){for(var f=["touches","changedTouches"],a=[],c=0;c<f.length;c++)for(var e=h.originalEvent[f[c]],d=0;d<e.length;d++){var g=e[d];b.inArray(g,a)==-1&&a.push(g)}return a},_resize:function(){var c=this.elem,e=c.width(),d=c.height();if(e!=this._width||d!=this._height){var b=this.options;if(b){if(!a.isNull(b.width))b.width=e;if(!a.isNull(b.height))b.height=d}this._setOptions(this.options)}},_clearRenderers:function(){if(this._oldTShapes){this._oldTShapes=null;this.elem.trigger("dataHighlighting",null)}this._oldShape=null;this._resetCursor();this.hideTooltip();this.hlRenderer&&this.hlRenderer._clear()},_processMouseMove:function(){this._processTooltips(this.mouseInput)},_processMouseEvents:function(){var b=this.mouseInput;if(!b)return;var a=this.hitTest(b.locX,b.locY);if(this._oldShape!=null&&this._oldShape==a)this._triggerShapeEvent("MouseMove",this._oldShape);else{if(this._oldShape!=null){this._triggerShapeEvent("MouseLeave",this._oldShape);this._oldShape.cursor&&this._resetCursor()}if(a!=null){this._triggerShapeEvent("MouseEnter",a);a.cursor&&this.elem.css("cursor",a.cursor)}this._oldShape=a}},_processTouchEvents:function(){var b=this.touchInput[0];if(!b)return;var a=this.hitTest(b.locX,b.locY);if(this._oldShape!=null&&this._oldShape==a)this._triggerShapeEvent("TouchMove",this._oldShape);else{this._oldShape!=null&&this._triggerShapeEvent("TouchEnd",this._oldShape);a!=null&&this._triggerShapeEvent("TouchStart",a);this._oldShape=a}},_processTooltips:function(c){var e=this.hasTooltips,f=this.hasHighlighting;if(!e&&!f)return;var g=this.options.tooltips.snapArea,b=this._getTooltipShapes(c.locX,c.locY,g,c),d=true;if(this._oldTShapes==null||!a.compareArrays(this._oldTShapes,b)){if(b!=null){d=this._initTooltip(b);this._highlightShapes(b)}if(b)this._oldTShapes=b}else d=false;b&&e&&d&&this._setTooltipPos(b,c)},_setTooltipPos:function(d,g){var k=this.tooltip.outerWidth(true),f=this.tooltip.outerHeight(true),h=this._width,e=this._height,j=d[0]._getTooltipPosition(g,k,f,h,e),c=j.y,i=d.length,l=this;if(i>1){c=0;b.each(d,function(){c+=this._getTooltipPosition(g,k,f,h,e).y});c/=i}c=a.fitInRange(c,0,e-f);this.tooltip.stop();this.tooltip.animate({left:j.x,top:c},100)},_processTouchStart:function(){this._processTooltips(this.touchInput[0])},_processTouchMove:function(){this._processTooltips(this.touchInput[0])},_initTooltip:function(a){if(!this.hasTooltips||!a||!a.length)return false;var g=a.length,f="",d;if(g==1)d=a[0].context;else{d=[];b.each(a,function(){d.push(this.context)})}if(!d)return false;var e=new b.Event("tooltipFormat");this.elem.trigger(e,[d]);var h=this;if(e.result===false){this.hideTooltip();return false}if(e.result)f=e.result;else f=this._getTooltipText(a);this.tooltip.html(f);var c=this.options.tooltips;if(g==1)if(c.borderColor){c.borderColor=="auto"&&this.tooltip.css("border-color",a[0].getTooltipColor());this.tooltip.css("border-color",c.borderColor)}c.background&&this.tooltip.css("background",c.background);this.showTooltip();return true},_highlightShapes:function(g){if(!this.hasHighlighting)return;this.hlRenderer._clear();var f=this.options.tooltips,a=[];b.each(g,function(d,c){var b=c._createHighlightShape(f.highlightingFillStyle,f.highlightingStrokeStyle);a.push(b)});var c;if(a.length==1){c=a[0].context;c.shape=a[0]}else{c=[];b.each(a,function(){c.push(this.context);c.shape=this})}var e=new b.Event("dataHighlighting");this.elem.trigger(e,[c]);if(e.result!==false)if(d.use_excanvas)this.hlRenderer._render(a);else{this.hlRenderer.ctx.save();this._setClip&&this._setClip(this.hlRenderer.ctx);this.hlRenderer._render(a);this.hlRenderer.ctx.restore()}},_getClosestShape:function(b,g,f){for(var a=b[0],d=1;d<b.length;d++){var e=b[d];if(c.compare(a,e,f,g)==false)a=e}return a},_getTooltip:function(){return"Tooltip"},_getTooltipText:function(c){var a="",d=this;b.each(c,function(){a+=d._getTooltip(this)});return a},_getTooltipShapes:function(h,i,c,b){if(!c)c=0;for(var e=[],f=this.shapes.length-1;f>=0;f--){var a=this.shapes[f];if(!a.context||a.isLegendItem||a.isAxisLabel)continue;var d=a.hitTest(b.locX,b.locY,c);if(typeof a.hitTestNonHV=="function")d=a.hitTestNonHV(b.locX,b.locY,c);if(d===true)e.push(a);else d&&e.push(d)}var g=this._getClosestShape(e,c,b);return!g?null:[g]},_resetCursor:function(){this.elem.css("cursor")!=this.originalCursor&&this.elem.css("cursor",this.originalCursor)},_triggerShapeEvent:function(b,a){a.context.shape=a;this.elem.trigger("dataPoint"+b,a.context)},_exportToImage:function(c,d){c=c||{};var a=b.extend({},d,c);a.type=c.type||"image/png";if(c.fileName)a.fileName=c.fileName;else switch(a.type){case"image/jpeg":a.fileName="jqChart.jpg";break;case"image/png":default:a.fileName="jqChart.png"}var e=this.toJSON(a);this._doRequest(a.server,"canvas="+e,a.method)},_exportToPdf:function(c,d){c=c||{};var a=b.extend({},d,c);a.type="application/pdf";a.fileName=c.fileName||"chart.pdf";var e=this.toJSON(a);this._doRequest(a.server,"canvas="+e,a.method)},_toJSON:function(c,d){var f=this,a="{type:'"+d.type+"',fileName:'"+d.fileName+"'";a+=",width:"+f._width+",height:"+f._height+",shapes:[";for(var b=0;b<c.length;b++){var e=c[b].toJSON();if(e){a+="{"+e+"}";if(b!=c.length-1)a+=","}}return a+"]}"},_doRequest:function(c,a,d){if(c&&a){a=typeof a=="string"?a:jQuery.param(a);var b="";jQuery.each(a.split("&"),function(){var a=this.split("=");b+='<input type="hidden" name="'+a[0]+'" value="'+a[1]+'" />'});jQuery('<form action="'+c+'" method="'+(d||"post")+'">'+b+"</form>").appendTo("body").submit().remove()}},getCurrentTool:function(){return this.currentTool},setCurrentTool:function(a){if(this.currentTool==a)return;this.currentTool!=null&&this.currentTool.stop();if(!a)this.currentTool=this.defaultTool;else this.currentTool=a;this.currentTool&&this.currentTool.start()},contains:function(a,b){return a>=0&&a<=this._width&&b>=0&&b<=this._height},hitTest:function(d,e,b){if(!b)b=0;for(var c=this.shapes.length-1;c>=0;c--){var a=this.shapes[c];if(!a.context)continue;if(a.hitTest(d,e,b))return a}},showTooltip:function(){this.tooltip.show()},hideTooltip:function(){this.tooltip.hide()},stringFormat:function(c,a){return b.jqChartSprintf(a,c)},clear:function(){this._clearRenderers();this.shapeRenderer._clear()},render:function(){},destroy:function(){var a=this.elem;a.empty();a.unbind();b(window).unbind("resize.jqChart");b(window.document).unbind("keydown.jqChart");var c=this.options;a.hasClass(this.pluginClass)&&a.removeClass(this.pluginClass)},toDataURL:function(a){return d.use_excanvas?null:this.canvas.toDataURL(a)},getShapesPerData:function(d){var a=[],c=this.shapes;b.each(d,function(){var d=this;b.each(c,function(){if(this.context)this.context.dataItem==d&&a.push(this)})});return a},highlightData:function(b){if(!b){this._clearRenderers();return null}var a=this.getShapesPerData(b);if(a.length==0)return null;this._highlightShapes(a);this._initTooltip(a);var c=a[0].getCenter();this._setTooltipPos(a,{locX:c.x,locY:c.y});return a}};var o=-Number.MAX_VALUE,i=Number.MAX_VALUE;function a(){}a.isNull=function(a){return a===null||a===undefined};a.roundH=function(a){return Math.round(a)-.5};a.round=function(b){var c=1/b;if(Math.abs(c)>1e4){var d=a.log10(Math.abs(c));if(d>13)return b}var e=b.toPrecision(14),f=parseFloat(e);return f};a.log10=function(a){return Math.log(a)/Math.LN10};a.log=function(b,a){return Math.log(b)/Math.log(a)};a.radians=function(a){return a*(Math.PI/180)};a.degrees=function(a){return 180*a/Math.PI};a.normalizeAngle=function(b){var a=b%(2*Math.PI);if(a<0)a+=2*Math.PI;return a};a.fitInRange=function(a,c,b){if(a<c)a=c;else if(a>b)a=b;return a};a.sum=function(b){for(var c=0,a=0;a<b.length;a++)c+=b[a];return c};a.compareArrays=function(a,b){if(!a&&!b)return true;if(!a||!b)return false;if(a.length!=b.length)return false;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return false;return true};a.rotatePointAt=function(j,k,c,a,b){var e=Math.sin(c),d=Math.cos(c),f=j-a,g=k-b,h=a+f*d-g*e,i=b+f*e+g*d;return{x:h,y:i}};a.rotatePointsAt=function(d,h,f,g){for(var c=[],b=0;b<d.length;b+=2){var e=a.rotatePointAt(d[b],d[b+1],h,f,g);c.push(e.x);c.push(e.y)}return c};a.reversePoints=function(c){for(var b=[],a=c.length-2;a>=0;a-=2){b.push(c[a]);b.push(c[a+1])}return b};a.trimPoints=function(d){var b=d.slice(0),c=b.length;while(c>1&&(a.isNull(b[0])||a.isNull(b[1]))){b.splice(0,2);c=b.length}while(c>1&&(a.isNull(b[c-2])||a.isNull(b[c-1]))){b.splice(c-2,2);c=b.length}return b};a.intersection=function(a,c,b,d){var f,h=(d.x-b.x)*(a.y-b.y)-(d.y-b.y)*(a.x-b.x),i=(c.x-a.x)*(a.y-b.y)-(c.y-a.y)*(a.x-b.x),e=(d.y-b.y)*(c.x-a.x)-(d.x-b.x)*(c.y-a.y);if(e!=0){var g=h/e,j=i/e;f={x:a.x+g*(c.x-a.x),y:a.y+g*(c.y-a.y)}}return f};a.processDataValue=function(a,b){switch(b){case"numeric":if(typeof a=="string")a=parseFloat(a);break;case"dateTime":if(typeof a=="string")a=new Date(a);break;case"string":if(typeof a!="string")a=a.toString()}return a};a.processDataField=function(h,c){if(!c)return null;var e,f,d,l,k=b.isPlainObject(c);if(k){e=c.name;f=c.type;d=c.convert}else e=c;for(var i,a,j=[],g=0;g<h.length;g++){i=h[g];a=i[e];if(d)a=d(a);else if(f)switch(f){case"numeric":if(typeof a=="string")a=parseFloat(a);break;case"dateTime":if(typeof a=="string")a=new Date(a)}j.push(a)}return j};a.mergeArraysXY=function(c,e){if(!c||c.length==0)return e;for(var b=[],a=0;a<c.length;a++){var d=[];d.push(c[a]);b.push(d)}for(var g=b.length,f,a=0;a<e.length;a++){f=e[a];if(a<g){var d=b[a];d.push(f)}else{var d=[null,f];b.Add(d)}}return b};a.mergeArrays=function(f){for(var h=f.length,c=[],a=0;a<h;a++){var e=f[a];if(e==null)return null;for(var i=c.length,b=0;b<e.length;b++){var g=e[b];if(b<i){var d=c[b];d[a]=g}else{var d=[];d[a]=g;c.push(d)}}}return c};a.cloneArray=function(a){return a.slice(0)};a.calcNullValue=function(h,m,l,o){for(var c,d,b,p,g=m-1;g>=0;g--){b=h[g];if(a.isNull(b))continue;switch(l){case"x":b=b[0];break;case"y":b=b[1]}if(!a.isNull(b)){c=b;break}}for(var f=m+1;f<h.length;f++){b=h[f];if(a.isNull(b))continue;switch(l){case"x":b=b[0];break;case"y":b=b[1]}if(!a.isNull(b)){d=b;break}}var j=a.isNull(c),i=a.isNull(d);if(j&&i)return null;if(j)c=d;else if(i)d=c;var e;if(o=="DateTimeAxis"){var k=c.getTime(),n=d.getTime();e=k+(n-k)/(f-g);e=new Date(e)}else e=c+(d-c)/(f-g);return e};a.getDistances=function(e){for(var c=[],d,b,f,a=0;a<shpaes.length-1;a++){b=e[a];f=e[a+1];d=f.y-b.y-b.height;c.push(d)}return c};function c(){this.fillStyle="black";this.strokeStyle="black";this.lineWidth=1;this.lineCap="butt";this.lineJoin="miter";this.miterLimit=10;this.visible=true;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowBlur=0;this.shadowOffsetX=0;this.shadowOffsetY=0}c.compare=function(b,e,a,j){if(!b.useHitTestArea&&!e.useHitTestArea)return true;if(b.useHitTestArea&&!e.useHitTestArea)return b.hitTest(a.locX,a.locY,j/3);if(b.hitTest(a.locX,a.locY,0))return true;var f=b.getCenter(a),g=e.getCenter(a),c=a.locX-f.x,d=a.locY-f.y,h=Math.sqrt(c*c+d*d);c=a.locX-g.x;d=a.locY-g.y;var i=Math.sqrt(c*c+d*d);return h<=i};c.getColorFromFillStyle=function(a){if(a==null)return"#dddddd";if(typeof a=="string")return a;if(a.colorStops&&a.colorStops[0]){var b=a.colorStops[0].color;return b!="white"&&b!="#ffffff"?b:a.colorStops[1].color}return"#dddddd"};c.prototype.hitTest=function(){return false};c.prototype.boundsHitTest=function(b,c,a){if(!this.useHitTestArea)a=0;return b>=this.x-a&&b<=this.x+this.width+a&&c>=this.y-a&&c<=this.y+this.height+a};c.prototype.render=function(b,a){!a&&this.setProperties(b)};c.prototype.renderDashedLine=function(f,h,g,i,l,c){var r=function(a,b){return Math.round(a)<=Math.round(b)},q=function(a,b){return Math.round(a)>=Math.round(b)},n=function(a,b){return Math.min(a,b)},m=function(a,b){return Math.max(a,b)},d={thereYet:q,cap:n},e={thereYet:q,cap:n};c.beginPath();if(h-i>0){e.thereYet=r;e.cap=m}if(f-g>0){d.thereYet=r;d.cap=m}c.moveTo(f,h);var a=f,b=h,k=0,j=true,s=l.length;while(!(d.thereYet(a,g)&&e.thereYet(b,i))){var o=Math.atan2(i-h,g-f),p=l[k];a=d.cap(g,a+Math.cos(o)*p);b=e.cap(i,b+Math.sin(o)*p);if(j)c.lineTo(a,b);else c.moveTo(a,b);k=(k+1)%s;j=!j}this.strokeStyle!=null&&this.lineWidth>0&&c.stroke()};c.prototype.setProperties=function(a){a.fillStyle=this._createGradient(a,this.fillStyle)||"#000000";a.strokeStyle=this.strokeStyle||"#000000";a.lineWidth=this.lineWidth||0;a.lineCap=this.lineCap;a.lineJoin=this.lineJoin;a.miterLimit=this.miterLimit;a.shadowColor=this.shadowColor;a.shadowBlur=this.shadowBlur;a.shadowOffsetX=this.shadowOffsetX;a.shadowOffsetY=this.shadowOffsetY};c.prototype.calculateBounds=function(b){if(b==null)return;for(var c=i,d=i,g=o,h=o,f,j,e=0;e<b.length;e+=2){f=b[e];j=b[e+1];if(a.isNull(f))continue;c=Math.min(c,f);d=Math.min(d,j);g=Math.max(g,f);h=Math.max(h,j)}this.x=c;this.y=d;this.width=g-c;this.height=h-d;this.center=this.getCenter()};c.prototype.getCenter=function(){return this.center?this.center:{x:this.x+this.width/2,y:this.y+this.height/2}};c.prototype.getTooltipColor=function(){return c.getColorFromFillStyle(this.fillStyle)};c.prototype.fillStyleToJSON=function(b){if(typeof b=="string"||this.width==null||this.height==null||this.x==null||this.y==null)return"'"+b+"'";var c="{type:'"+b.type+"'";if(!a.isNull(b.x0))c+=",x0:"+b.x0;if(!a.isNull(b.x1))c+=",x1:"+b.x1;if(!a.isNull(b.y0))c+=",y0:"+b.y0;if(!a.isNull(b.y1))c+=",y1:"+b.y1;if(b.type=="radialGradient"){if(!a.isNull(b.r0))c+=",r0:"+b.r0;if(!a.isNull(b.r1))c+=",r1:"+b.r1}c+=",colorStops:[";for(var f=b.colorStops.length,d=0;d<f;d++){var e=b.colorStops[d];c+="{color:'"+e.color+"'";if(!a.isNull(e.offset))c+=",offset:"+e.offset;c+="}";if(d!=f-1)c+=","}c+="]}";return c};c.prototype.arrayToJSON=function(c){for(var d,b="[",a=0;a<c.length;a++){d=c[a];b+=d;if(a!=c.length-1)b+=","}return b+"]"};c.prototype.toJSON=function(){var a=this,b="";if(a.lineWidth)b=",lineWidth:"+a.lineWidth;if(a.fillStyle)b+=",fillStyle:"+a.fillStyleToJSON(a.fillStyle);if(a.strokeStyle)b+=",strokeStyle:'"+a.strokeStyle+"'";if(!a.visible)b+=",visible:"+a.visible;if(a.shadowColor!="rgba(0, 0, 0, 0)")b+=",shadowColor:'"+a.shadowColor+"'";if(a.shadowBlur)b+=",shadowBlur:"+a.shadowBlur;if(a.shadowOffsetX)b+=",shadowOffsetX:"+a.shadowOffsetX;if(a.shadowOffsetY)b+=",shadowOffsetY:"+a.shadowOffsetY;if(a.strokeDashArray)b+=",strokeDashArray:"+a.arrayToJSON(a.strokeDashArray);return b};c.prototype._createGradient=function(j,e){var c=this.x,d=this.y;if(e==null||typeof e=="string"||this.width==null||this.height==null||c==null||d==null)return e;if(this.xOffset)c+=this.xOffset;if(this.yOffset)d+=this.yOffset;var f,a={x0:0,y0:0,x1:1,y1:1,r0:0,r1:1};b.extend(a,e);switch(e.type){case"radialGradient":var m=c+a.x0*this.width,o=d+a.y0*this.height,k=a.r0*this.width/2,n=c+a.x1*this.width,p=d+a.y1*this.height,l=a.r1*this.width/2;f=j.createRadialGradient(m,o,k,n,p,l);break;default:var s=c+a.x0*this.width,t=d+a.y0*this.height,r=c+a.x1*this.width,q=d+a.y1*this.height;f=j.createLinearGradient(s,t,r,q)}var g=a.colorStops;if(g!=null)for(var h=0;h<g.length;h++){var i=g[h];f.addColorStop(i.offset||0,i.color)}return f};c.prototype._createHighlightShape=function(e,d){var a=new c;b.extend(a,this);a.fillStyle=a.highlightingFillStyle||e;if(this instanceof s)a.strokeStyle=a.highlightingStrokeStyle||d;return a};c.prototype._getTooltipPosition=function(d,f,e,c,b){var a=this._getTooltipOrigin(d);return this._getTooltipPositionFromOrigin(a.x,a.y,f,e,c,b)};c.prototype._getTooltipOrigin=function(){return this.tooltipOrigin?this.tooltipOrigin:{x:this.x+this.width/2,y:this.y}};c.prototype._getTooltipPositionFromOrigin=function(d,e,g,f){var a=15,b=d-g-a,c=e-f+10;if(b<0)b=Math.max(0,d+a);if(c<0)c=Math.max(0,e-a);return{x:b,y:c}};c.prototype._getAnimationPoints=function(c,b){if(c.length==b)return c;var d=b%2;b-=d;var f=c.slice(0,b);d/=2;var i=c[b-2],g=c[b-1],h=c[b],e=c[b+1];if(!a.isNull(g)&&!a.isNull(e)){h=i+(h-i)*d;e=g+(e-g)*d;f.push(h);f.push(e)}return f};function s(a,d,b,e){c.call(this);this.x1=a;this.y1=d;this.x2=b;this.y2=e;this.useHitTestArea=true}s.prototype=new c;s.constructor=new s;s.prototype.hitTest=function(f,g,j){var b=this.x1,d=this.y1,c=this.x2,e=this.y2,a=Math.max(j,Math.max(3,this.lineWidth/2));if(b==c){var h=f+1;return h>b-a&&h<c+a&&g>=d-a&&g<=e+a?true:false}if(d==e){var i=g+.5;return f>=b-a&&f<=c+a&&i>d-a&&i<e+a?true:false}return false};s.prototype.hitTestNonHV=function(n,o,l){var a=this.x1,b=this.y1,c=this.x2,d=this.y2;if(a<c){this.x=a;this.width=c-a}else{this.x=c;this.width=a-c}if(b<d){this.y=b;this.width=d-b}else{this.y=d;this.width=b-d}var g=c-a,h=d-b,e,f,i;if(g==0){e=1;f=0;i=-a}else if(h==0){e=0;f=-1;i=-b}else if(Math.abs(g)<Math.abs(h)){e=1;f=g/h;i=-((a*d-b*c)/h)}else{e=-(h/g);f=-1;i=-((b*c-a*d)/g)}var k=Math.sqrt(e*e+f*f),j=(e*n-f*o+i)/k,m=Math.max(l,3);return Math.abs(j)<m?true:false};s.prototype.render=function(b,j){if(!this.visible)return;c.prototype.render.call(this,b,j);var d=Math.floor(this.lineWidth%2)?a.roundH:Math.round;if(this.dontRound)d=function(a){return a};var e=d(this.x1),g=d(this.y1),f=d(this.x2),h=d(this.y2);if(this.xOffset){e+=this.xOffset;f+=this.xOffset}if(this.yOffset){g+=this.yOffset;h+=this.yOffset}if(this.rotationAngle&&!a.isNull(this.rotX)&&!a.isNull(this.rotY)){var i=a.rotatePointsAt([e,g,f,h],this.rotationAngle,this.rotX,this.rotY);e=i[0];g=i[1];f=i[2];h=i[3]}if(this.strokeDashArray){this.renderDashedLine(e,g,f,h,this.strokeDashArray,b);return}b.beginPath();b.moveTo(e,g);b.lineTo(f,h);this.strokeStyle!=null&&this.lineWidth>0&&b.stroke()};s.prototype.toJSON=function(){var a=this,b="type:'line',x1:"+a.x1+",y1:"+a.y1+",x2:"+a.x2+",y2:"+a.y2;b+=c.prototype.toJSON.call(this);return b};function h(d,e,b,a){c.call(this);this.x=d;this.y=e;this.width=b;this.height=a;this.cornerRadius=0}h.prototype=new c;h.constructor=new h;h.prototype.hitTest=function(b,c,a){return this.boundsHitTest(b,c,a)};h.prototype.render=function(b,l){if(!this.visible)return;c.prototype.render.call(this,b,l);var i=this.strokeStyle!=null&&this.lineWidth>0,k=i&&Math.floor(this.lineWidth%2)?a.roundH:Math.round,j=this.correction||0;j=Math.round(j);var f=k(this.x),g=k(this.y),e=Math.round(this.width),d=Math.round(this.height),m=this.context;if(this.xDecrease){e-=this.xDecrease;if(this.isAnimReversed)f+=this.xDecrease}if(this.yDecrease){d-=this.yDecrease;if(this.isAnimReversed)g+=this.yDecrease}if(this.xOffset)f+=this.xOffset;if(this.yOffset)g+=this.yOffset;if(e<=0||d<=0)return;if(this.cornerRadius==0)h.renderRectPath(b,f,g,e,d);else this.renderRoundedRectPath(b,f,g,e,d);this.fillStyle!=null&&b.fill();i&&b.stroke()};h.renderRectPath=function(a,b,c,e,d){a.beginPath();a.moveTo(b,c);a.lineTo(b+e,c);a.lineTo(b+e,c+d);a.lineTo(b,c+d);a.closePath()};h.prototype.renderRoundedRectPath=function(b,c,d,g,f){var a=this.cornerRadius,e=Math.PI/2;b.beginPath();b.moveTo(c+a,d);b.lineTo(c+g-a,d);b.arc(c+g-a,d+a,a,-e,0,false);b.lineTo(c+g,d+f-a);b.arc(c+g-a,d+f-a,a,0,e,false);b.lineTo(c+a,d+f);b.arc(c+a,d+f-a,a,e,2*e,false);b.lineTo(c,d+a);b.arc(c+a,d+a,a,2*e,-e,false);b.closePath()};h.prototype.toJSON=function(){var a=this,b="type:'rectangle',x:"+a.x+",y:"+a.y+",width:"+a.width+",height:"+a.height;if(a.cornerRadius)b+=",cornerRadius:"+a.cornerRadius;b+=c.prototype.toJSON.call(this);return b};function x(d,e,b,a){c.call(this);this.x=d;this.y=e;this.width=b;this.height=a}x.prototype=new c;x.constructor=new x;x.prototype.hitTest=function(f,g,a){if(this.boundsHitTest(f,g,a)==false)return false;var c=(this.width+a)/2,b=(this.height+a)/2,h=this.x+c,i=this.y+b,d=f-h,e=g-i,j=d*d/(c*c),k=e*e/(b*b);return j+k<=1};x.prototype.render=function(a,m){if(!this.visible)return;c.prototype.render.call(this,a,m);var b=this.x,e=this.y,l=this.width,k=this.height;if(this.xOffset)b+=this.xOffset;if(this.yOffset)e+=this.yOffset;var g=this.width/2*.5522848,h=this.height/2*.5522848,i=b+l,j=e+k,f=b+l/2,d=e+k/2;a.beginPath();a.moveTo(b,d);a.bezierCurveTo(b,d-h,f-g,e,f,e);a.bezierCurveTo(f+g,e,i,d-h,i,d);a.bezierCurveTo(i,d+h,f+g,j,f,j);a.bezierCurveTo(f-g,j,b,d+h,b,d);a.closePath();this.fillStyle!=null&&a.fill();this.strokeStyle!=null&&this.lineWidth>0&&a.stroke()};x.prototype.toJSON=function(){var a=this,b="type:'ellipse',x:"+a.x+",y:"+a.y+",width:"+a.width+",height:"+a.height;b+=c.prototype.toJSON.call(this);return b};function C(e,f,a,b,d){c.call(this);this.x=e;this.y=f;this.radius=a;this.startAngle=b;this.endAngle=d;this.width=this.height=2*a}C.prototype=new c;C.constructor=new C;C.prototype.render=function(a,d){if(!this.visible)return;c.prototype.render.call(this,a,d);a.beginPath();var b=Math.max(0,this.radius);a.arc(Math.round(this.x+b),Math.round(this.y+b),Math.round(b),this.startAngle,this.endAngle,false);this.strokeStyle!=null&&this.lineWidth>0&&a.stroke()};C.prototype.toJSON=function(){var a=this,b="type:'arc',x:"+a.x+",y:"+a.y+",radius:"+a.radius+",startAngle:"+a.startAngle+",endAngle:"+a.endAngle;b+=c.prototype.toJSON.call(this);return b};function r(b,d,a){c.call(this);this.x=b;this.y=d;this.radius=a;this.width=this.height=2*a}r.prototype=new c;r.constructor=new r;r.prototype.hitTest=function(e,f,a){if(!this.useHitTestArea)a=0;var c=this.x+this.width/2,d=this.y+this.height/2,b=Math.pow(e-c,2)+Math.pow(f-d,2);return b>Math.pow(this.radius+a,2)?false:true};r.prototype.render=function(a,d){if(!this.visible)return;c.prototype.render.call(this,a,d);a.beginPath();var b=Math.max(0,this.radius);a.arc(Math.round(this.x+b),Math.round(this.y+b),Math.round(b),0,Math.PI*2,false);a.closePath();this.fillStyle!=null&&a.fill();this.strokeStyle!=null&&this.lineWidth>0&&a.stroke()};r.prototype.toJSON=function(){var a=this,b="type:'circle',x:"+a.x+",y:"+a.y+",radius:"+a.radius;b+=c.prototype.toJSON.call(this);return b};function w(f,g,a,b,d){c.call(this);this.x=f;this.y=g;this.radius=a;this.startAngle=b;this.endAngle=d;this.width=this.height=2*a;var e=(b+d)/2,h=f+a*Math.cos(e),i=g+a*Math.sin(e);this.center=this.tooltipOrigin={x:h,y:i}}w.prototype=new c;w.constructor=new w;w.prototype.hitTest=function(g,h){var e=this.x,f=this.y,i=Math.pow(g-e,2)+Math.pow(h-f,2);if(i>Math.pow(this.radius,2))return false;var j=e-g,k=f-h,b=Math.atan2(k,j)+Math.PI;b=a.normalizeAngle(b);var c=a.normalizeAngle(this.startAngle),d=a.normalizeAngle(this.endAngle);if(c>d){if(b>=c&&b<=2*Math.PI||b<d&&b>=0)return true}else if(b>=c&&b<d)return true;return false};w.prototype.render=function(a,i){if(!this.visible)return;if(this.startAngle==this.endAngle)return;c.prototype.render.call(this,a,i);a.beginPath();var g=Math.round(this.x),h=Math.round(this.y),b=this.startAngle,e=this.endAngle;if(d.use_excanvas){var f=2*Math.PI-.000125;if(e-b>=f)e=b+f}a.moveTo(g,h);a.arc(g,h,Math.round(this.radius),b,e,false);a.closePath();this.fillStyle!=null&&a.fill();this.strokeStyle!=null&&this.lineWidth>0&&a.stroke()};w.prototype.toJSON=function(){var a=this,b="type:'pieSlice',x:"+a.x+",y:"+a.y+",radius:"+a.radius+",startAngle:"+a.startAngle+",endAngle:"+a.endAngle;b+=c.prototype.toJSON.call(this);return b};function f(){c.call(this)}f.prototype=new c;f.constructor=new f;f.prototype.hitTest=function(k,l,g){var e=this.context;if(!e||!e.points)return this.boundsHitTest(k,l,g);for(var d=this.pts,m=Math.pow(g,2),c=-1,f=i,h,j,b,n=this.isStepLine?4:2,a=0;a<d.length;a+=n){h=d[a];j=d[a+1];b=Math.pow(k-h,2)+Math.pow(l-j,2);if(b>f||b>m)continue;f=b;c=a}return c==-1?false:this.createHighlightMark(c)};f.prototype.createHighlightMark=function(c){if(c==-1)return null;var d=this.context,g=this.pts,f=c/2;if(this.isStepLine)f/=2;var h=d.points[f],e=5,a=new r(g[c]-e,g[c+1]-e,e);a.fillStyle=a.highlightingFillStyle=this.strokeStyle;a.strokeStyle="white";a.lineWidth=1;a.useHitTestArea=true;a.context={series:d.series,chart:d.chart};b.extend(a.context,h);return a};f.prototype.getCenter=function(g){if(this.center)return this.center;var e=this.context;if(!e||!e.points)return{x:this.x+this.width/2,y:this.y+this.height/2};for(var b=this.pts,a=0,f=i,j=g.locX,d,h=this.isStepLine?4:2,c=0;c<b.length;c+=h){d=Math.abs(b[c]-j);if(f>d){f=d;a=c}}return{x:b[a],y:b[a+1],mark:this.createHighlightMark(a)}};f.prototype.getLength=function(){return this.pts.length};function k(b,a,c){f.call(this);this.pts=b;this.closed=c;if(a){this.isBoundsHitTest=a;this.calculateBounds(b)}}k.prototype=new f;k.constructor=new k;k.prototype.renderPoints=function(a,c,i){var g=c.length;if(g<=2)return;if(this.strokeDashArray){this.renderDashed(a,c);return}for(var h=this.nullHandling!="connect",e=true,b=2;b<g;b+=2){var d=c[b];if(d==null){if(h){this.strokeStyle!=null&&this.lineWidth>0&&a.stroke();e=false}continue}var f=c[b+1];if(!e){a.beginPath();a.moveTo(d,f);e=true;continue}a.lineTo(d,f);if(b%1e3==0&&!i){this.strokeStyle!=null&&this.lineWidth>0&&a.stroke();a.beginPath();a.moveTo(d,f)}}};k.prototype.render=function(e,g){if(!this.visible)return;c.prototype.render.call(this,e,g);var b=a.trimPoints(this.pts);if(this.closed){b.push(b[0]);b.push(b[1])}if(!a.isNull(this.length)){var h=this.closed?this.length+2:this.length;b=this._getAnimationPoints(b,h)}var f=b.length;if(f<=2)return;if(this.xOffset){b=b.slice(0);for(var d=0;d<b.length;d+=2)b[d]+=this.xOffset}if(this.yOffset){b=b.slice(0);for(var d=1;d<b.length;d+=2)b[d]+=this.yOffset}e.beginPath();e.moveTo(b[0],b[1]);this.renderPoints(e,b);this.strokeStyle!=null&&this.lineWidth>0&&e.stroke()};k.prototype.renderDashed=function(k,f){for(var j=f.length,i=this.nullHandling!="connect",h=this.strokeDashArray,c=false,d,e,a=0;a<j;a+=2){var b=f[a];if(b==null){if(i)c=false;continue}var g=f[a+1];if(!c){d=b;e=g;c=true;continue}this.renderDashedLine(d,e,b,g,h,k);d=b;e=g}};k.prototype.toJSON=function(){var a=this,b="type:'polyline',pts:"+a.arrayToJSON(a.pts);if(this.nullHandling)b+=",nullHandling:'"+a.nullHandling+"'";if(a.closed)b+=",closed:"+a.closed;b+=c.prototype.toJSON.call(this);return b};function l(a,b){f.call(this);if(!a)return;this.closed=b;this.pts=a;this.calculateBounds(a)}l.prototype=new f;l.constructor=new l;l.prototype.renderPoints=function(f,i){var g=.4,h=this.closed,a=[];b.merge(a,i);var d=[],e=a.length;if(e<=2)return;if(e==4){f.lineTo(a[2],a[3]);return}if(h){a.push(a[0],a[1],a[2],a[3]);a.unshift(a[e-1]);a.unshift(a[e-1]);for(var c=0;c<e;c+=2)d=d.concat(this.getControlPoints(a[c],a[c+1],a[c+2],a[c+3],a[c+4],a[c+5],g));d=d.concat(d[0],d[1]);for(var c=2;c<e+2;c+=2)f.bezierCurveTo(d[2*c-2],d[2*c-1],d[2*c],d[2*c+1],a[c+2],a[c+3])}else{for(var c=0;c<e-4;c+=2)d=d.concat(this.getControlPoints(a[c],a[c+1],a[c+2],a[c+3],a[c+4],a[c+5],g));f.quadraticCurveTo(d[0],d[1],a[2],a[3]);for(var c=2;c<e-5;c+=2)f.bezierCurveTo(d[2*c-2],d[2*c-1],d[2*c],d[2*c+1],a[c+2],a[c+3]);f.quadraticCurveTo(d[2*e-10],d[2*e-9],a[e-2],a[e-1])}};l.prototype.render=function(b,f){if(!this.visible)return;c.prototype.render.call(this,b,f);var d=a.trimPoints(this.pts);if(!a.isNull(this.length))d=this._getAnimationPoints(d,this.length);var e=d.length;if(e<4)return;b.beginPath();b.moveTo(d[0],d[1]);this.renderPoints(b,d);if(this.closed){b.closePath();this.fillStyle!=null&&b.fill()}this.strokeStyle!=null&&this.lineWidth>0&&b.stroke()};l.prototype.getControlPoints=function(d,f,a,b,e,g,j){var h=Math.sqrt(Math.pow(a-d,2)+Math.pow(b-f,2)),k=Math.sqrt(Math.pow(e-a,2)+Math.pow(g-b,2)),c=j*h/(h+k),i=j-c,l=a+c*(d-e),m=b+c*(f-g),n=a-i*(d-e),o=b-i*(f-g);return[l,m,n,o]};l.prototype.toJSON=function(){var a=this,b="type:'curve',pts:"+a.arrayToJSON(a.pts);if(a.closed)b+=",closed:"+a.closed;b+=c.prototype.toJSON.call(this);return b};function B(a,c,e,g){f.call(this);this.pts=a;this.crossPos=c;this.vertical=e||false;this.isCurve=g||false;if(a&&a.length>=2){var d=[];b.merge(d,a);if(e)b.merge(d,[c,a[a.length-1],c,a[1]]);else b.merge(d,[a[a.length-2],c,a[0],c]);this.calculateBounds(d)}}B.prototype=new f;B.constructor=new B;B.prototype.render=function(d,g){if(!this.visible)return;c.prototype.render.call(this,d,g);var b=a.trimPoints(this.pts);if(!a.isNull(this.length))b=this._getAnimationPoints(b,this.length);var f=b.length;if(f<=2)return;var e;if(this.isCurve)e=new l(b);else{e=new k(b);e.nullHandling="connect"}d.beginPath();d.moveTo(b[0],b[1]);e.renderPoints(d,b,true);if(this.vertical){d.lineTo(this.crossPos,b[b.length-1]);d.lineTo(this.crossPos,b[1])}else{d.lineTo(b[b.length-2],this.crossPos);d.lineTo(b[0],this.crossPos)}d.closePath();this.fillStyle!=null&&d.fill();this.strokeStyle!=null&&this.lineWidth>0&&d.stroke()};B.prototype.toJSON=function(){var a=this,b="type:'area',pts:"+a.arrayToJSON(a.pts)+",crossPos:"+a.crossPos+",vertical:"+a.vertical;if(a.isCurve)b+=",isCurve:"+a.isCurve;b+=c.prototype.toJSON.call(this);return b};function v(c,d,g,e){f.call(this);if(!c)return;this.pts1=c;this.pts2=d;this.pts=[];b.merge(this.pts,c);!e&&b.merge(this.pts,a.reversePoints(d));this.calculateBounds(this.pts);this.center=null;this.isCurve=g||false}v.prototype=new f;v.constructor=new v;v.prototype.getLength=function(){return this.pts1.length};v.prototype.render=function(d,h){if(!this.visible)return;c.prototype.render.call(this,d,h);var e=this.pts1,b=this.pts2;if(!a.isNull(this.length)){e=this._getAnimationPoints(e,this.length);b=this._getAnimationPoints(b,this.length)}b=a.reversePoints(b);var g=e.length;if(g<2)return;var f;if(this.isCurve)f=new l(e);else f=new k(e);d.beginPath();d.moveTo(e[0],e[1]);f.renderPoints(d,e,true);d.lineTo(b[0],b[1]);if(this.isCurve)f=new l(b);else f=new k(b);f.renderPoints(d,b,true);d.closePath();this.fillStyle!=null&&d.fill();this.strokeStyle!=null&&this.lineWidth>0&&d.stroke()};v.prototype.toJSON=function(){var a=this,b="type:'rangeShape',pts1:"+a.arrayToJSON(a.pts1)+",pts2:"+a.arrayToJSON(a.pts2);if(a.isCurve)b+=",isCurve:"+a.isCurve;b+=c.prototype.toJSON.call(this);return b};function q(a){f.call(this);this.pts=a;this.calculateBounds(a)}q.prototype=new f;q.constructor=new q;q.prototype.hitTest=function(k,a,i){var l=this.context;if(l&&l.points)return f.prototype.hitTest.call(this,k,a,i);var o=this.boundsHitTest(k,a,i);if(o==false)return false;if(this.isBoundsHitTest&&i)return true;for(var b=this.pts,h=false,m=b.length,j,c,n,e,d=0,g=0;g<m;g+=2){d+=2;if(d==m)d=0;j=b[g];c=b[g+1];n=b[d];e=b[d+1];if(c<a&&e>=a||e<a&&c>=a)if(j+(a-c)/(e-c)*(n-j)<k)h=!h}return h};q.prototype.render=function(e,h){if(!this.visible)return;c.prototype.render.call(this,e,h);var b=this.pts,g=b.length;if(g<4)return;if(this.xOffset){b=b.slice(0);for(var d=0;d<b.length;d+=2)b[d]+=this.xOffset}if(this.yOffset){b=b.slice(0);for(var d=1;d<b.length;d+=2)b[d]+=this.yOffset}if(this.rotationAngle&&!a.isNull(this.rotX)&&!a.isNull(this.rotY))b=a.rotatePointsAt(b,this.rotationAngle,this.rotX,this.rotY);var f=Math.floor(this.lineWidth%2)?a.roundH:Math.round;if(this.dontRound)f=function(a){return a};e.beginPath();e.moveTo(f(b[0]),f(b[1]));for(var d=2;d<g;d+=2)e.lineTo(f(b[d]),f(b[d+1]));e.closePath();this.fillStyle!=null&&e.fill();this.strokeStyle!=null&&this.lineWidth>0&&e.stroke()};q.prototype.toJSON=function(){var b=this,a="type:'polygon',pts:"+b.arrayToJSON(b.pts);a+=c.prototype.toJSON.call(this);return a};function e(a,b,c){this.text=a;this.x=b;this.y=c;this.width=0;this.height=0;this.strokeStyle=null;this.textBaseline="middle";this.font="10px sans-serif";this.textAlign="left"}e.prototype=new c;e.constructor=e;e.numbers=["1","2","3","4","5","6","7","8","9"];e.separator="\n";e.prototype.render=function(b,d){if(!this.visible)return;c.prototype.render.call(this,b,d);var e=a.roundH(this.x),f=a.roundH(this.y);if(this.rotationAngle&&!a.isNull(this.rotX)&&!a.isNull(this.rotY)){b.save();b.translate(this.rotX,this.rotY);b.rotate(this.rotationAngle);this.flip&&b.scale(-1,-1);this.renderBg(b);this.fillStyle!=null&&b.fillText(this.text,0,0);this.strokeStyle!=null&&b.strokeText(this.text,0,0);b.restore()}else{this.renderBg(b);this.renderText(b,e,f)}};e.prototype.renderText=function(b,c,a){var i=this.text&&this.text.search(e.separator)!=-1;if(i){var h=this.text.split(e.separator),d=this.getHeight(),f;switch(this.textBaseline){case"middle":a-=(this.height-d)/2;break;case"bottom":a-=this.height-d}for(var g=0;g<h.length;g++){f=h[g];this.fillStyle!=null&&b.fillText(f,c,a);this.strokeStyle!=null&&b.strokeText(f,c,a);a+=d}}else{this.fillStyle!=null&&b.fillText(this.text,c,a);this.strokeStyle!=null&&b.strokeText(this.text,c,a)}};e.prototype.renderBg=function(b){var e=this.background;if(!e)return;var g=a.roundH(this.x),i=a.roundH(this.y);!this.width&&this.measure(b);var d=Math.round(this.width),c=Math.round(this.height);b.fillStyle=this._createGradient(b,e)||"#000000";var f=this._correctXY(g,i,d,c);h.renderRectPath(b,f.x,f.y,d,c);b.fill();b.fillStyle=this._createGradient(b,this.fillStyle)||"#000000"};e.prototype.getHeight=function(){for(var f=0,c=this.font.split(" "),a=0;a<c.length;a++){var d=c[a],g=d.charAt(0);if(b.inArray(g,e.numbers)!=-1){f=parseFloat(d)||0;break}}return f};e.prototype.measure=function(f){this.setProperties(f);var c=this.getHeight(),a,b,h=this.text&&this.text.search(e.separator)!=-1;if(h){var d=this.text.split(e.separator);c=d.length*c;a=0;for(var i,g=0;g<d.length;g++){b=f.measureText(d[g]);a=Math.max(a,b.width)}}else{b=f.measureText(this.text);a=b.width}this.width=a;this.height=c;return{width:a,height:c}};e.prototype._correctXY=function(a,b,d,c){switch(this.textAlign){case"center":a-=d/2;break;case"right":a-=d}switch(this.textBaseline){case"middle":b-=c/2;break;case"bottom":b-=c}return{x:a,y:b}};e.prototype.isInRect=function(e,f,h,g){var a=this.x,b=this.y,d=this.width,c=this.height;switch(this.textAlign){case"center":a-=d/2;break;case"right":a-=d}switch(this.textBaseline){case"middle":b-=c/2;break;case"bottom":b-=c}return a>=e&&b>=f&&a+d<=e+h&&b+c<=f+g};e.prototype.intersectWith=function(c,d,i,h){var a=this.x,b=this.y,g=this.width,f=this.height,e=this._correctXY(a,b,g,f);a=e.x;b=e.y;return c<a+g&&a<c+i&&d<b+f&&b<d+h};e.prototype.setProperties=function(a){c.prototype.setProperties.call(this,a);a.font=this.font;a.textAlign=this.textAlign;a.textBaseline=this.textBaseline};e.prototype.hitTest=function(a,b,e){if(!this.isLegendItem&&!this.isAxisLabel)return false;var d=this.width,c=this.height;switch(this.textAlign){case"center":a+=d/2;break;case"right":a+=d}switch(this.textBaseline){case"middle":b+=c/2;break;case"bottom":b+=c}return this.boundsHitTest(a,b,e)};e.prototype.toJSON=function(){var b=this;if(!b.text||b.text=="")return false;var d="type:'textBlock',x:"+b.x+",y:"+b.y+",width:"+b.width+",height:"+b.height+",text:'"+b.text+"'";d+=",font:'"+b.font+"'";d+=",textBaseline:'"+b.textBaseline+"'";d+=",textAlign:'"+b.textAlign+"'";if(!a.isNull(b.rotationAngle))d+=",rotationAngle:"+b.rotationAngle;if(!a.isNull(b.rotX))d+=",rotX:"+b.rotX;if(!a.isNull(b.rotY))d+=",rotY:"+b.rotY;if(b.flip)d+=",flip:"+b.flip;d+=c.prototype.toJSON.call(this);return d};function u(b,c,a){this.x=b;this.y=c;this.src=a}u.prototype=new c;u.constructor=u;u.prototype.hitTest=function(b,c,a){return this.boundsHitTest(b,c,a)};u.prototype.render=function(e){if(!this.visible)return;var b=new Image,c=this.x,d=this.y,a=this;b.onload=function(){if(a.deleted)return;var g=b.width,f=b.height;c-=g/2;d-=f/2;a.x=c;a.y=d;if(a.offsetX)c+=a.offsetX;if(a.offsetY)d+=a.offsetY;a.width=g;a.height=f;e.drawImage(b,c,d)};b.src=this.src};u.prototype._createHighlightShape=function(b){var a=new h;a.context=this.context;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.fillStyle=b;a.strokeStyle="gray";return a};function p(a){c.call(this);this.shapes=a}p.prototype=new c;p.constructor=new p;p.prototype.hitTest=function(e,f,c){for(var b=this.shapes,a=0;a<b.length;a++){var d=b[a];if(d.hitTest(e,f,c))return true}return false};p.prototype._getTooltipOrigin=function(a){return{x:a.locX,y:a.locY}};p.prototype.render=function(d){if(!this.visible)return;c.prototype.render.call(this,d);for(var b=this.shapes,a=0;a<b.length;a++){var e=b[a];e.render(d,true)}};function M(c,d,b,a){this.x=c;this.y=d;this.width=b;this.height=a}M.prototype.toJSON=function(){var a=this,b="type:'clip',x:"+a.x+",y:"+a.y+",width:"+a.width+",height:"+a.height;return b};function J(){}J.prototype.toJSON=function(){var b=this,a="type:'resetClip'";return a};function K(a){this.renderShadows=a}K.prototype.toJSON=function(){var b=this,a="type:'shadows',renderShadows:"+b.renderShadows;return a};function n(a,b){if(this.canvas==null){this.canvas=a;this.ctx=this._getContext(this.canvas)}this.chart=b}n.prototype._getContext=function(a){return a.getContext?a.getContext("2d"):null};n.emptyColor="rgba(0, 0, 0, 0)";n.prototype._render=function(h){var f=this.offsetX||this.offsetY,g=this.chart.options,c=this.ctx;if(!a.isNull(g.globalAlpha))c.globalAlpha=g.globalAlpha;if(f){c.save();c.translate(this.offsetX,this.offsetY)}for(var d=0;d<h.length;d++){var b=h[d];if(b){!this.isHighlighting&&b.context&&b.context.series&&!b.isLegendItem&&!(b instanceof e)&&this.chart.elem.trigger("shapeRendering",b);if(b.src&&this.isExcanvas){b.offsetX=this.offsetX;b.offsetY=this.offsetY;c.translate(-this.offsetX,-this.offsetY);b.render(c);c.translate(this.offsetX,this.offsetY)}else{var i=b.shadowColor;b.shadowColor=n.emptyColor;b.render(c);b.shadowColor=i}}}f&&c.restore()};n.prototype._renderShadows=function(h){if(d.use_excanvas)return;var g=this.offsetX&&this.offsetY,c=this.chart.options;if(!c.shadows||!c.shadows.enabled)return;var b=this.ctx;if(!a.isNull(c.globalAlpha))b.globalAlpha=c.globalAlpha;if(g){b.save();b.translate(this.offsetX,this.offsetY)}for(var f=0;f<h.length;f++){var e=h[f];e&&e.shadowColor&&e.shadowColor!="rgba(0, 0, 0, 0)"&&e.render(b)}g&&b.restore()};n.prototype._clear=function(){var a=this.shapes;if(a)for(var b=0;b<a.length;b++)a[b].deleted=true;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)};function A(a){this.defaults={visible:true,strokeStyle:"black",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,cornerRadius:10,padding:4,ignoreOffset:false};this.x=0;this.y=0;this.setOptions(a)}A.prototype._setShapeSettings=function(a){a.fillStyle=this.fillStyle;if(this.visible){a.strokeStyle=this.strokeStyle;a.lineWidth=this.lineWidth;a.lineCap=this.lineCap;a.lineJoin=this.lineJoin;a.miterLimit=this.miterLimit;a.cornerRadius=this.cornerRadius}else a.lineWidth=0};A.prototype._render=function(c){var a=this.visible?this.lineWidth/2:0,f=this.x+a,g=this.y+a,e=this.width-2*a,d=this.height-2*a,b=new h(f,g,e,d);this._setShapeSettings(b);c.push(b)};A.prototype.setOptions=function(c){var a=b.extend({},this.defaults,c||{});b.extend(this,a)};A.prototype.getPaddings=function(){var a={left:0,right:0,top:0,bottom:0};if(!this.visible)return a;var d=this.lineWidth+this.cornerRadius/2;if(this.ignoreOffset===true)d=this.lineWidth;var g,h,f,e,c=this.padding;if(b.isPlainObject(c)){g=c.left||0;h=c.top||0;f=c.right||0;e=c.bottom||0}else g=h=f=e=c||0;a.left=g+d;a.top=h+d;a.right=f+d;a.bottom=e+d;return a};function z(a){j.call(this,a)}z.prototype=new j;z.constructor=z;z.prototype.mouseWheel=function(c,b){if(!b)return;c.preventDefault();var a=this.view.options.zoomLevel;a+=a*b/10;a=Math.max(this.view.options.minZoomLevel,a);this.view.options.zoomLevel=a;this.view.partialDelayedUpdate()};function m(a){y.call(this,a)}m.prototype=new y;m.constructor=m;m.prototype.canStart=function(){return true};m.prototype.start=function(){this.oldMouseInput=this.view.mouseInput;this.currCursor=this.view.originalCursor;var a=this.view.originalCursor=b.browser&&b.browser.mozilla?"-moz-grabbing":"move";this.view.elem.css("cursor",a)};m.prototype.mouseMove=function(){var a=this.view.mouseInput,d=this.oldMouseInput.locX-a.locX,e=this.oldMouseInput.locY-a.locY,b=this.view.options.offsetX||0,c=this.view.options.offsetY||0;b-=d;c-=e;this.view.options.offsetX=b;this.view.options.offsetY=c;this.oldMouseInput=a;this.view.partialDelayedUpdate()};m.prototype.mouseUp=function(){this.stopTool()};m.prototype.stop=function(){this.dx=0;this.dy=0;this.view.originalCursor=this.currCursor;this.view._resetCursor();y.prototype.stop.call(this)};function g(a){this.pluginClass="ui-jqgeomap";this.tooltipClass="ui-jqgeomap-tooltip";d.call(this,a);this.timer=new L(b.proxy(this.partialUpdate,this));this.storyboard=new G(b.proxy(this._renderShapes,this));this.defaultTool=new z(this);this.currentTool=this.defaultTool;this.mouseDownTools.push(new m(this))}g.prototype=new d;g.constructor=g;g.prototype._createElements=function(a){d.prototype._createElements.call(this,a);this._createHighlightRenderer();this.border=new A;this.layers=new t(this);this.projection=new F;this.projection.chart=this;this.colorSwatch=D(this)};g.prototype._setOptions=function(f){var c=f||{};c.tooltips=b.extend(true,{},b.fn.jqGeoMap.defaults.tooltips,c.tooltips);c.shadows=b.extend(true,{},b.fn.jqGeoMap.defaults.shadows,c.shadows);c.border=b.extend(true,{},b.fn.jqGeoMap.defaults.border,c.border);c.globalAlpha=a.isNull(c.globalAlpha)?b.fn.jqGeoMap.defaults.globalAlpha:c.globalAlpha;c.background=a.isNull(c.background)?b.fn.jqGeoMap.defaults.background:c.background;c.zoomLevel=a.isNull(c.zoomLevel)?b.fn.jqGeoMap.defaults.zoomLevel:c.zoomLevel;c.minZoomLevel=a.isNull(c.minZoomLevel)?b.fn.jqGeoMap.defaults.minZoomLevel:c.minZoomLevel;c.offsetX=a.isNull(c.offsetX)?b.fn.jqGeoMap.defaults.offsetX:c.offsetX;c.offsetY=a.isNull(c.offsetY)?b.fn.jqGeoMap.defaults.offsetY:c.offsetY;this.hasTooltips=c.tooltips&&!c.tooltips.disabled;this.hasHighlighting=c.tooltips&&c.tooltips.highlighting;this.options=c;d.prototype._setOptions.call(this,c);var e=f||{};if(e.width)this.elem.css("width",e.width);else this.elem.width()==0&&this.elem.css("width","400px");if(e.height)this.elem.css("height",e.height);else this.elem.height()==0&&this.elem.css("height","50px");var h=this._width=this.elem.width(),g=this._height=this.elem.height();this.layers.setOptions(c.layers);this._setCanvasSize(this.canvas,h,g);this._setCanvasSize(this.hlCanvas,h,g);this.border.setOptions(c.border);this.border.fillStyle=c.background||this.border.fillStyle;this.update()};g.prototype._measure=function(){this.layers._measure()};g.prototype._arrange=function(){var c=this._width,a=this._height;this.border.width=c;this.border.height=a;var b=this.border.getPaddings();c-=b.left+b.right;a-=b.top+b.bottom;var i=b.left,j=b.top,f=this.layers.ratio,e=c/f;if(e<a){var g=a-e;a=e;j+=g/2}else{var h=a*f,g=c-h;c=h;i+=g/2}var d=this.layers;d.x=i;d.y=j;d.width=c;d.height=a;this.layers._arrange()};g.prototype._getTooltip=function(b){var a=b.context;return a.properties.name?a.properties.name:a.properties.place};g.prototype.partialDelayedUpdate=function(){this.timer.kick()};g.prototype.partialUpdate=function(){this.render()};g.prototype._createShapes=function(){var a=[],b=[];this.border._render(b);this.layers._render(a);this._addTrialWatermark(a);this.shapes=a;this.borderShapes=b};g.prototype._renderShapes=function(){var e=d.isRetinaDisplay,c=this._width,a=this._height;if(e){this._setRetinaDispOpts(this.canvas,c,a);this._setRetinaDispOpts(this.hlCanvas,c,a)}this.shapeRenderer._clear();this.shapeRenderer._render(this.borderShapes);this.shapeRenderer._renderShadows(this.shapes);this.shapeRenderer._render(this.shapes);if(e){b(this.canvas).css({width:c,height:a});b(this.hlCanvas).css({width:c,height:a})}};g.prototype.render=function(){this.clear();this._createShapes();this._renderShapes()};g.prototype.update=function(){this._measure();this._arrange();this.render();this.storyboard.begin()};g.prototype.exportToImage=function(a){this._exportToImage(a,b.fn.jqGeoMap.defaults.exportConfig)};g.prototype.exportToPdf=function(a){this._exportToPdf(a,b.fn.jqGeoMap.defaults.exportConfig)};g.prototype.toJSON=function(b){var e=this.gridArea,a=this.options.shadows,d=a&&a.enabled,c=[];return this._toJSON(c,b)};function H(b,a){this.min=b;this.max=a}H.prototype={scaleValue:function(b){return a.fitInRange((b-this.min)/(this.max-this.min),0,1)},getScaledFillStyle:function(c,a){var b=Math.round(this.scaleValue(c)*(a.length-1));return a[b]}};function F(){}F.prototype={project1:function(k,l,d,i,j,c,a,e,b,f){var g=d+j/(e-a)*(k-a),h=i+c-c/(f-b)*(l-b);return{x:g,y:h}},project:function(u,b,n,q,t,k,f,o,g,p){b=a.fitInRange(b,-85.05112878,85.05112878);var i=o-f,j=p-g;b=this.lat2y(b);var d=(u-f)*t/i,e=k-(b-g)*k/j,c=this.chart.options,h=c.zoomLevel,l=c.offsetX,m=c.offsetY,r=i/2,s=j/2;d+=l+(d-r)*(h-1);e+=m+(e-s)*(h-1);return{x:n+d,y:q+e}},lat2y:function(b){var a=Math.sin(b*Math.PI/180);return 180*Math.log((1+a)/(1-a))/(4*Math.PI)}};function I(a){this.setOptions(a)}I.prototype={setOptions:function(a){a=b.extend({},this.defaults,a||{});b.extend(this,a);if(!this.source)return;var c=this;b.ajax({type:"GET",url:a.source,dataType:"json",success:function(a){c.geoJSON=a},error:function(){},data:{},async:false})},_setShapeSettings:function(a){a.strokeStyle=this.strokeStyle;a.lineWidth=this.lineWidth;a.lineCap=this.lineCap;a.lineJoin=this.lineJoin;a.miterLimit=this.miterLimit;d.setShadows(a,this,this.chart);a.cursor=this.cursor},_measure:function(){if(!this.geoJSON)return false;var a=this.bbox;if(a){this.minX=a[0];this.minY=a[1];this.maxX=a[2];this.maxY=a[3]}else this._calcBBox();this._calcValues();return true},_arrange:function(){},_render:function(x){var i=this.geoJSON;if(!i||!i.features)return;for(var m=this.chart.layers,l=[],w=10,n=0;n<i.features.length;n++){var d=i.features[n],g=d.geometry.coordinates,e=this.getValue(d),c=null,v=e&&this.valueScale?this.valueScale.scaleValue(e):0,u=e&&this.valueScale?this.valueScale.getScaledFillStyle(e,this.fillStyles):this.fillStyle;switch(d.geometry.type){case"Point":var k=m._projectList([g]),y=k[0],z=k[1],s=2+v*w;c=new r(y-s,z-s,s);break;case"Polygon":for(var h=[],f=0;f<g.length;f++){var k=m._projectList(g[f]),j=new q(k);j.dontRound=true;h.push(j)}c=new p(h);break;case"MultiPolygon":for(var h=[],f=0;f<g.length;f++)for(var t=g[f],o=0;o<t.length;o++){var k=m._projectList(t[o]),j=new q(k);j.dontRound=true;h.push(j)}c=new p(h)}if(c){this._setShapeSettings(c);c.useHitTestArea=false;c.fillStyle=u;c.context={type:d.type,id:d.id,properties:d.properties};if(!a.isNull(e))c.context.value=e;l.push(c)}}l.sort(function(a,b){return b.width-a.width});b.merge(x,l)},_calcBBox:function(){var h=this.geoJSON;if(!h||!h.features)return;for(var d=i,b=o,e=i,c=o,q=this.chart.layers,l=0;l<h.features.length;l++){var n=h.features[l],f=n.geometry.coordinates,r=null;switch(n.geometry.type){case"Point":var j=f[0],k=f[1];if(d>j)d=j;else if(b<j)b=j;if(e>k)e=k;else if(c<k)c=k;break;case"Polygon":for(var g=0;g<f.length;g++){var a=this._calcMinMax(f[g]);d=Math.min(d,a.minX);e=Math.min(e,a.minY);b=Math.max(b,a.maxX);c=Math.max(c,a.maxY)}break;case"MultiPolygon":for(var g=0;g<f.length;g++)for(var p=f[g],m=0;m<p.length;m++){var a=this._calcMinMax(p[m]);d=Math.min(d,a.minX);e=Math.min(e,a.minY);b=Math.max(b,a.maxX);c=Math.max(c,a.maxY)}}}this.minX=d;this.maxX=b;this.minY=e;this.maxY=c},_calcMinMax:function(h){for(var e=i,c=o,f=i,d=o,k=[],g=0;g<h.length;g++){var j=h[g],a=j[0],b=j[1];if(e>a)e=a;else if(c<a)c=a;if(f>b)f=b;else if(d<b)d=b}return{minX:e,maxX:c,minY:f,maxY:d}},_calcValues:function(){var b=this.geoJSON;if(!b||!b.features)return;for(var d=i,c=o,e=0;e<b.features.length;e++){var f=b.features[e],a=this.getValue(f);if(!a)continue;if(d>a)d=a;else if(c<a)c=a}this.valueScale=new H(d,c)},getValue:function(c){var a,f=this.valueField;if(f){a=c.properties[this.valueField];if(a)return a}var e=c.properties[this.valueOption];if(e&&this.values)for(var b=0;b<this.values.length;b++){var d=this.values[b];if(e==d[0])return d[1]}return null},defaults:{fillStyles:["#E0FFD4","#BCF590","#94E14F","#61B713","#3F9308","#267114"],lineCap:"butt",lineJoin:"round",lineWidth:1,strokeStyle:"gray",fillStyle:"white",cursor:"pointer"}};function t(a){this.chart=a}t.prototype.setOptions=function(a){this.options=a;for(var c=[],b=0;b<a.length;b++){var e=a[b],d=new I(e);d.chart=this.chart;c.push(d)}this.items=c};t.prototype._measure=function(){var k=this.options,d=i,c=o,f=i,e=o,b=k.bbox;if(b){d=b[0];f=b[1];c=b[2];e=b[3]}else for(var j=this.items,g=0;g<j.length;g++){var a=j[g];if(a._measure()){d=Math.min(d,a.minX);f=Math.min(f,a.minY);c=Math.max(c,a.maxX);e=Math.max(e,a.maxY)}}this.minX=d;this.maxX=c;this.dx=c-d;var h=this.chart.projection;this.minY=h.lat2y(f);this.maxY=h.lat2y(e);this.dy=this.maxY-this.minY;this.ratio=this.dx/this.dy/2};t.prototype._arrange=function(){for(var b=this.items,a=0;a<b.length;a++){var c=b[a];c._arrange()}};t.prototype._render=function(c){for(var b=this.items,a=0;a<b.length;a++){var d=b[a];d._render(c)}};t.prototype._projectList=function(c){for(var f=this.chart.projection,g=this.layers,a=[],b=0;b<c.length;b++){var e=c[b],d=f.project(e[0],e[1],this.x,this.y,this.width,this.height,this.minX,this.maxX,this.minY,this.maxY);a.push(d.x);a.push(d.y)}return a};function D(a){this.chart=a}D.prototype={}})(jQuery)